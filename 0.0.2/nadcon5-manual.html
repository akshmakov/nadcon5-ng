<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>NADCON5-ng: NADCON5.0 Reference Manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_style_overrides.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NADCON5-ng
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
   <div id="projectbrief">NADCON5 Next Generation Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>About</span></a></li>
      <li class="current"><a href="pages.html"><span>Manual</span></a></li>
      <li><a href="modules.html"><span>Code&#160;Documentation</span></a></li>
      <li><a href="https://nc5ng.org"><span>Project&#160;Homepage</span></a></li>
      <li><a href="https://github.com/nc5ng/nadcon5-ng"><span>Project&#160;Github</span></a></li>
      <li><a href="./refman.pdf"><span>PDF&#160;Manual</span></a></li>
      <li><a href="files.html"><span>Index</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nadcon5-manual.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NADCON5.0 Reference Manual </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sindatafiles">Input Files   </a><ul><li class="level2"><a href="#scontrolfile">Control File    </a></li>
<li class="level2"><a href="#sworkedits">workedits File   </a></li>
<li class="level2"><a href="#sinfiles">In Files      </a></li>
</ul>
</li>
<li class="level1"><a href="#sgmtbatscript">GMT Batch Files     </a></li>
<li class="level1"><a href="#soutputfiles">Output Files      </a><ul><li class="level2"><a href="#sworkfile">Work File       </a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Reference Manual for the NADCON5.0 Codebase</p>
<p>This document serves as a high level reference for the filetypes and processing programs in NADCON5.0 .</p>
<p>A detailed Documentation of the Source Code is available in <a href="./modules.html">Code Documentation</a> chapter. Where the primary build programs are described in <a class="el" href="group__doers.html">NADCON5 Build Programs</a> and the auxiliarly library functions and subroutines are described in <a class="el" href="group__core.html">NADCON5 Core Library</a></p>
<hr/>
 <h1><a class="anchor" id="sindatafiles"></a>
Input Files   </h1>
<p>This Section Defines all the Files used by NADCON5.0 programs in the <a class="el" href="group__core.html">NADCON5 Core Library</a> to generate the <a href="#sgmtbatscripts">GMT Batch Files</a> and some of the <a href="#soutputfiles">Output Files</a>.</p>
<h2><a class="anchor" id="scontrolfile"></a>
Control File    </h2>
<p>The Control File describes the <a href="#sinfiles">In Files</a> which contain data for a given transformation.</p>
<p>They are named </p><pre class="fragment">control.OLD_DATUM.NEW_DATUM.REGION
</pre><p>Control Files exist in the folder <code>data/Control</code> . The existence of a control file means that the transformation is defined.</p>
<dl class="section note"><dt>Note</dt><dd>Conversely. If a control file does not exist, then the transformation is not defined</dd></dl>
<p>The Structure of the Control File is a list of valid input files with formatted header information.</p>
<p>We show this structure by using an example. </p><pre class="fragment">HEADER: Master File for creating a NADCON5 work file
REGION: CONUS
DATUM1: USSD
DATUM2: NAD27
REJMET: 10000
NFILES: 49
NADCON5.USSD.NAD27.AL.in
NADCON5.USSD.NAD27.AR.in
...
49 Total Files Listed
...
</pre><p>The Control file is used by <a class="el" href="group__doers.html#gaf03b9b1cd4fc369d51ac1e46b9231fc7">makework</a> to generate the initial <a href="#sworkfile">Work File</a></p>
<dl class="section note"><dt>Note</dt><dd>It is critical that the header labels (<code>HEADER</code>, <code>REGION</code>, <code>DATUM1</code>, etc.) are not changed, as the program <a class="el" href="group__doers.html#gaf03b9b1cd4fc369d51ac1e46b9231fc7">makework</a> verifies each line against these strings.</dd></dl>
<p><b>Parameter Details</b></p>
<ul>
<li><code>HEADER</code> - Header line. Can contain anything.</li>
<li><code>REGION</code> - REGION Parameter from <a href="#sdatapipeline">Build Pipeline</a>. Must conform to the following list:<ul>
<li>conus</li>
<li>alaska</li>
<li>prvi</li>
<li>hawaii</li>
<li>guamcnmi</li>
<li>as</li>
<li>pribilof</li>
<li>stlawrence</li>
</ul>
</li>
<li><code>DATUM1</code> - The older datum, chronologically. <code>OLD_DATUM</code> Parameter from <a href="#sdatapipeline">Build Pipeline</a>.</li>
<li><code>DATUM2</code> - The newer datum, chronologically. <code>NEW_DATUM</code> Parameter from <a href="#sdatapipeline">Build Pipeline</a>.</li>
<li><code>REJMET</code> The rejection criteria in meters. Basically if any latitude shift or longitude shift or horizontal shift exceeds this value (in absolute value), then all shifts for this point are set to zero (to avoid asterisks in the output file) but the whole line is labeled with a triple reject criteria, effectively eliminating the pair from use.</li>
<li><code>NFILES</code> - The number of *.in files which connect the old and new datums in the region being addressed.</li>
</ul>
<h2><a class="anchor" id="sworkedits"></a>
workedits File   </h2>
<p>Used by <a class="el" href="group__doers.html#gaf03b9b1cd4fc369d51ac1e46b9231fc7">makework</a> and located in data/Work , the <code>workedits</code> is a database of rejected datum transformation points. That is, the <code>workedits</code> file provides a list of specific points in the <a href="#sinfiles">InFiles</a> which should be rejected for various, manually identified, reasons.</p>
<p>The file format is fixed column delminted. The formatting is hardcoded in <a class="el" href="group__doers.html#gaf03b9b1cd4fc369d51ac1e46b9231fc7">makework</a> with index records, the format each individual read is a complete string. Strings are not "stripped" so left justification is required.</p>
<p>The columns are: </p><pre class="fragment">01- 10  : olddtm : lower case, left justified 
    11  : "|"    : vertcal spacer just for ease of reading
12- 21  : newdtm : lower case, left justified 
    22  : "|"    : vertcal spacer just for ease of reading
23- 32  : region : lower case, left justified (conus, alaska, hawaii, prvi, guamcnmi, as)
    33  : "|"    : vertcal spacer just for ease of reading
34- 39  : PID    : upper case, left justified 
    40  : "|"    : vertcal spacer just for ease of reading
41- 43  : rejects: Three digits (0's or 1's only) to reject lat, lon, eht, in that order.  '1' = reject, '0' = keep
    44  : "|"    : vertcal spacer just for ease of reading
45-200  : reason : Upper/lower case, giving first your name then reason for the line to exist
</pre><p>Or, in other Words: </p><pre class="fragment">olddtm   |newdtm    |region    |PID   |rej|Reason 
lwr case |lwr case  |lwr case  |uprcas|0's|Give your name or initials first, then reason
left     |left      |left      |6 char|or |Upper or lower case or both
justified|justified |justified |      |1's|
10 char  |10 char   |10 char   |      |   |
</pre><p>An Example: </p><pre class="fragment">ussd      |nad27     |conus     |KG0640|110|DAS: USSD and NAD 27 coordinates are impossibly identical.
ussd      |nad27     |conus     |DK3691|110|DAS: USSD and NAD 27 coordinates are impossibly identical.
XXXXXXXXXX-XXXXXXXXXX-XXXXXXXXXX-XXXXXX-XXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
  oldtm       newtm      region   pid   rej                                 comment
</pre><p><b>Parameters:</b></p>
<ul>
<li><code>oldtm</code> - Source Datum</li>
<li><code>newtm</code> - Target Datum</li>
<li><code>region</code> - Geographical Region (e.g. conus)</li>
<li><code>pid</code> - Point ID</li>
<li><code>rej</code> - Bit Field to reject lat, lon, eht</li>
<li><code>Reason</code> - Comment Field</li>
</ul>
<h2><a class="anchor" id="sinfiles"></a>
In Files      </h2>
<p>The In Files are located in data/InFiles and contain the actual reference and transformation data for the construction of the NADCON5.0 dataset.</p>
<p>These files are created per state/territory and for every transformation vector.</p>
<p>The files are named per the convention </p><pre class="fragment">NADCON5.DATUM1.DATUM2.STATE.in
</pre><p>The format of these files is a fixed format file. The format strings are defined in <a class="el" href="group__doers.html#gaf03b9b1cd4fc369d51ac1e46b9231fc7">makework</a></p>
<p>The first row of the file identifies the converted datums in comment header, with a Fortran Format specifier of </p><pre class="fragment">100 format(27x,a15,26x,a15)
</pre><p>For example: (with format offsets and variable name indicated underneath) </p><pre class="fragment">                         US Standard Datum           |                  NAD 27         
---------------------------XXXXXXXXXXXXXXX--------------------------XXXXXXXXXXXXXXX
                               nameh                                     namef
</pre><p>That is, 15 Character Strings with offsets <code>27</code> and <code>68</code> (<code>27+15+26</code>).</p>
<dl class="section note"><dt>Note</dt><dd>Characters outside the defined 15 Character Region are simply ignored, in the above example, the String <code>US Standard Datum</code> would be truncated and trimed by Fortran to <code>Standard Datum</code>. However, this header line is not currently used for anything by <a class="el" href="group__doers.html#gaf03b9b1cd4fc369d51ac1e46b9231fc7">makework</a></dd></dl>
<p>The remaining rows define the actual datapoints, with a fortran format specifier of </p><pre class="fragment">101 format(a6,1x,a2,5x,a13,1x,a14,1x,a9,3x,a13,1x,a14,1x,a9)
</pre><p>For Example: </p><pre class="fragment">AA5496 CA 085 N372639.93300 W1220955.92000       N/A | N372639.71836 W1220959.79579       N/A
XXXXXX-XX-----XXXXXXXXXXXXX-XXXXXXXXXXXXXX-XXXXXXXXX---XXXXXXXXXXXXX-XXXXXXXXXXXXXX-XXXXXXXXX
pid   state       clath         clonh        cehth       clatf           clonf         cehtf
</pre><p><b>Parameters:</b></p>
<ul>
<li><code>pid</code> - Point ID (NGS Internal Unique Designator)</li>
<li><code>state</code> - State this point belongs to</li>
<li><code>clath</code> - Source Datum Lat. (Decimal Degrees with Cardinal Direction)</li>
<li><code>clonh</code> - Source Datum Lon. (Decimal Degrees with Cardinal Direction)</li>
<li><code>cehth</code> - Source Datum Height (Meters)</li>
<li><code>clatf</code> - Target Datum Lat.</li>
<li><code>clonf</code> - Target Datum Lon.</li>
<li><code>cehtf</code> - Target Datum Height</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Partial Transformation points (e.g. no Height data) are specified by using <code>N/A</code> specifier to exclude the lat. , lon. , and/or height from the calculations.</dd></dl>
<p>The file is read until the last record indicated by an end of file (<code>EOF</code>), there is no footer or record counter.</p>
<hr/>
 <h1><a class="anchor" id="sgmtbatscript"></a>
GMT Batch Files     </h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Write This Section</dd></dl>
<hr/>
 <h1><a class="anchor" id="soutputfiles"></a>
Output Files      </h1>
<h2><a class="anchor" id="sworkfile"></a>
Work File       </h2>
<p>The <code>workfile</code> is the first file created in the build pipeline. It serves as a local database of all the points and associated transformation data which is later used to construct images, grids, and other outputs.</p>
<p>The workfile is generated with the name </p><pre class="fragment">work.DATUM1.DATUM2.REGION
</pre><p>And is placed (hardcoded) in the local <code>Work/</code> directory</p>
<p>The new file has the following format:</p>
<pre class="fragment"> Cols  Format Description
 1-  6   a6    PID
     7   1x    - blank -
 8-  9   a2    State
    10   a1    Reject code for missing latitude pair (blank for good)
    11   a1    Reject code for missing longitude pair (blank for good)
    12   a1    Reject code for missing ellip ht pair (blank for good)
    13   1x    - blank -
14- 27 f14.10  Latitude (HARN), decimal degrees (-90 to +90)
    28   1x    - blank -
29- 42 f14.10  Lonitude (HARN), decimal degrees (0 to 360)
    43   1x    - blank -
44- 51   f8.3  Ellipsoid Height (HARN), meters
    52   1x    - blank -
53- 61   f9.5  Delta Lat (FBN-HARN), arcseconds
    62   1x    - blank -
63- 71   f9.5  Delta Lon (FBN-HARN), arcseconds
    72   1x    - blank -
73- 81   f9.3  Delta Ell Ht (FBN-HARN), meters
    82   1x    - blank - 
83- 91   f9.5  Delta Horizontal (absolute value), arcseconds
    92   1x    - blank -
93-101   f9.5  Azimuth of Delta Horizontal (0-360), degrees
   102   1x    - blank - 
103-111   f9.3  Delta Lat (FBN-HARN), meters
   112   1x    - blank -
113-121   f9.3  Delta Lon (FBN-HARN), meters
   122   1x    - blank -
123-131   f9.3  Delta Horizontal (absolute value), meters
</pre><p>Which is defined by fortran <code>format</code> Identifier </p><pre class="fragment">  104     format(a6,1x,a2,a1,a1,a1,1x,f14.10,1x,f14.10,1x,f8.3,1x,
 *    f9.5,1x,f9.5,1x,f9.3,1x,f9.5,1x,f9.5,1x,f9.3,1x,f9.3,1x,f9.3,
 *    1x,a10,1x,a10)
</pre><p>An example of a workfile record: </p><pre class="fragment">BG3971 AL  1  30.3435430556 272.5144786111    0.000  -0.24400  -0.43700     0.000   0.50050 237.09789    -7.537   -11.649    13.874 ussd       nad27     
XXXXXX-XXxXx-XXXXXXXXXXXXXX-XXXXXXXXXXXXXX-XXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXXX-XXXXXXXXXX
pid state|rej    xlath          xlonh        xehth    dlatsec   dlonsec    dehtm    dhorsec  azhor      dlatm     dlonm    dhorm      olddtm     newdtm </pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Dec 5 2017 18:50:25 for NADCON5-ng by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
