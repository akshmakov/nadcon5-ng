<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>NADCON5-ng: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NADCON5-ng
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
   <div id="projectbrief">NADCON5 Next Generation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Project&#160;Documentation</span></a></li>
      <li><a href="modules.html"><span>Code&#160;Documentation</span></a></li>
      <li><a href="files.html"><span>Index</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Makefile-Test.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<div class="textblock"><p>NADCON5-NG Top Makefile</p>
<p>Stuff and Things</p>
<p>Internal Variable showing relative location to top of project _TOP_DIR := ./</p>
<h6></h6>
<h6></h6>
<h6></h6>
<h3>Global Variables</h3>
<h6></h6>
<h6></h6>
<h6></h6>
<h2>Driving Parameters</h2>
<h2></h2>
<h2>Variables passed as arguments and used to create filenames by</h2>
<h2>NADCON5 build process</h2>
<h2></h2>
<h2>These can be set externally by environment variable or by passing to make</h2>
<h2></h2>
<h6></h6>
<p>OLD_DATUM : Source Datum (usually arg[1]) OLD_DATUM ?= ussd</p>
<p>NEW_DATUM : Target Datum (usually arg[2]) NEW_DATUM ?= nad27</p>
<p>REGION : Target Region (usually arg[3]) REGION ?= conus</p>
<p>MAPLEVEL : Target Map Generation Level (arg[4] or arg[5] always last) MAPLEVEL ?= 0</p>
<p>GRIDSPACING : Target Map Grid in arcsec (arg[4]) GRIDSPACING ?= 900</p>
<h6></h6>
<p>BASE_OUT_NAME : Full Qualified Name of this build used for constructing output directories BASE_OUT_NAME := ....</p>
<p>Fixed Directories</p>
<p>TOP_DIR : The Project Folder Root TOP_DIR ?= $(shell cd ; pwd)</p>
<p>DATA_ROOT_DIR : Where the project data files reside DATA_ROOT_DIR ?= /data</p>
<p>BUILD_DIR : root for build output BUILD_DIR ?= /build</p>
<p>BIN_DIR : Output place for binaries BIN_DIR ?= /bin</p>
<p>OUT_DIR : Output place for constructed date OUT_DIR ?= /out.</p>
<p>GMT_WRAPPER_DIR : Place where our wrappers for gmt scripts live GMT_WRAP_DIR ?= /gmt_wrappers</p>
<p>CODE_DIR : Root for our Source Distribution CODE_DIR ?= /src export PATH := /home/akshmakov/venv/nc5ng/bin:/home/akshmakov/bin:/home/akshmakov/.local/bin:/home/akshmakov/bin:/home/akshmakov/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin::</p>
<p>CONTROL_DIR : Control Data Location, and Copy Destination CONTROL_DIR ?= /Control CONTROL_CPY_DIR = /Control</p>
<p>DATA_DIR : Data Folder Location and Copy Destination DATA_DIR ?= /Data DATA_CPY_DIR = /Data</p>
<p>WORK_DIR : Work Folder Location and Copy Destination WORK_DIR ?= /Work WORK_CPY_DIR = /Work</p>
<p>MASK_DIR : Mask Folder Location and Copy Destination MASKS_DIR ?= /Masks MASKS_CPY_DIR = /Masks</p>
<p>IN_DIR : In Files Location and Copy Destination IN_DIR ?= /InFiles IN_CPY_DIR = /InFiles</p>
<p>GMTDEFAULTS : Default GMT Setting File and copy destination GMTDEFAULTS ?= /gmtdefaults4 GMTDEFAULTS_CPY = /.gmtdefaults4 /.gmtdefaults4</p>
<p>CPY_TARETS : List Of All Copy Destination Targets Used to construct the build environment CPY_TARGETS =      </p>
<h6></h6>
<h6></h6>
<h3>Build Commands/Binaries</h3>
<h6></h6>
<h6></h6>
<p>Common System Commands</p>
<p>MKDIR ?= mkdir RM ?= rm ECHO ?= echo CP ?= cp CD ?= cd DATE ?= date TIMESTAMP := $(shell  +"%Y%m%d-%H%M%S")</p>
<p>Compiled Programs (src/)</p>
<p>MAKEWORK_BIN = /makework MAKEPLOT1_BIN = /makeplotfiles01 MAKEPLOT2_BIN = /makeplotfiles02 MAKEPLOT3_BIN = /makeplotfiles03 MYMEDIAN_BIN = /mymedian5 MYRMS_BIN = /myrms CHECKGRID_BIN = /checkgrid</p>
<p>DEP_TARGETS : Binary Dependencies - files needed to run DEP_TARGETS =       </p>
<h6></h6>
<h6></h6>
<h3>TARGET VARIABLES</h3>
<h6></h6>
<h6></h6>
<p>Target Files (Files Created)</p>
<p>WORK_OUT_FILE: Generated Work File WORK_OUT_FILE = /work...</p>
<p>BAT_FILE_1 : First GMT Command Bat File BAT_FILE_1 = /gmtbat01....</p>
<p>BAT_FILE_2 : Second GMT Command Bat File BAT_FILE_2 = /gmtbat02....</p>
<p>BAT_FILE_3 : Third GMT Command Bat File BAT_FILE_3 = /gmtbat03.....</p>
<p>BAT_FILE_4 : Fourth GMT Command Bat File BAT_FILE_4 = /gmtbat04.....</p>
<p>BAT_FILE_5 : Fifth GMT Command Bat File BAT_FILE_5 = /gmtbat05....</p>
<p>BAT_FILE_6 : Sixth GMT Command Bat File BAT_FILE_6 = /gmtbat06.....</p>
<p>OUT_TARGETS : List of all generated output files OUT_TARGETS =       </p>
<h6></h6>
<h6></h6>
<h3>Target Definition</h3>
<h6></h6>
<h6></h6>
<p>Default - all</p>
<p>all:</p>
<h6></h6>
<h2>Output Directory and Dependency Construction</h2>
<h2></h2>
<h2>Targets to construct the output directory to generate the datum conversion</h2>
<h2>data</h2>
<h2></h2>
<h2>These targets create directories and copy input data to the right</h2>
<h2>Locations</h2>
<h2></h2>
<h6></h6>
<p>Copy to build environment</p>
<p>:  |   -r $&lt; $@</p>
<p>:  |   -r $&lt; $@</p>
<p>:  |   -r $&lt; $@</p>
<p>:  |   -r $&lt; $@</p>
<p>:  |   -r $&lt; $@</p>
<p>:  |   -r $&lt; $@</p>
<p>Output Folder</p>
<p>:  -p $@</p>
<p>Dependencies - pass along to source makefile</p>
<p>:  -C  $@</p>
<h6></h6>
<h2>Output and Output Script Targets</h2>
<h2></h2>
<h2>These Targets generate and execute the intermediate gmt batch scripts</h2>
<h2></h2>
<h2>These targets create the same files as created in the upstream doit</h2>
<h2>batch scripts</h2>
<h2></h2>
<h6></h6>
<p>DOIT_ARGS_3</p>
<p>Only Used 3 Argument Input</p>
<p>define DOIT_ARGS_3    endef export DOIT_ARGS_3</p>
<p>DOIT_ARGS_4_MAPLEVEL</p>
<p>4 Argument Input with MAPLEVEL</p>
<p>define DOIT_ARGS_4_MAPLEVEL     endef export DOIT_ARGS_4_MAPLEVEL</p>
<p>DOIT_ARGS_4_GRIDSPACING</p>
<p>4 Argument Input with GRIDSPACING</p>
<p>define DOIT_ARGS_4_GRIDSPACING     endef export DOIT_ARGS_4_GRIDSPACING</p>
<p>DOIT_ARGS_5</p>
<p>Only Used 5 (All) Argument Inpu</p>
<p>define DOIT_ARGS_5      endef export DOIT_ARGS_5</p>
<p>Output File Targets</p>
<p>Generate Intermediate Batch Script by calling compiled program and passing arguments using echo and linux pipes</p>
<p>In this implementation each target also runs its generated script this behavior is not guaranteed to continue but the targets are standardized</p>
<p>:   |  ( cd ; \ echo "$$DOIT_ARGS_3" \ | )</p>
<p>:    |  ( cd  ; \ echo "$$DOIT_ARGS_4_MAPLEVEL" | ; \ chmod 777 $@; \ $@ ;\ ) :    |  ( cd  ; \ echo "$$DOIT_ARGS_4_GRIDSPACING" | ; \ chmod 777 $@ ;\ $@ ;\ )</p>
<p>:    |  ( cd  ; \ echo "$$DOIT_ARGS_5" | ; \ chmod 777 $\ $@ ;\ )</p>
<p>:    |  ( cd  ; \ echo "$$DOIT_ARGS_5" | ; \ chmod 777 $@ ;\ $@ ;\ )</p>
<p>:    |  ( cd  ; \ echo "$$DOIT_ARGS_4_GRIDSPACING" | ; \ chmod 777 $@ ;\ $@ ;\ )</p>
<p>:    |  ( cd  ; \ echo "$$DOIT_ARGS_5" | ; \ chmod 777 $@ ;\ $@ ;\ )</p>
<h6></h6>
<h2>Convenience and Aggregate Targets</h2>
<h2></h2>
<h2>These Targets have fixed names and are either aliases or aggregates</h2>
<h2>of other targets</h2>
<h2></h2>
<h2>These Targets are declared PHONY and should not be used as a dependency</h2>
<h2></h2>
<h2></h2>
<h6></h6>
<p>binaries</p>
<p>create all binaries, recursive make call</p>
<p>binaries:  -C  binaries</p>
<p>libraries</p>
<p>create all linkable libraries, recursive make call</p>
<p>libraries:  -C  libraries</p>
<p>dependencies</p>
<p>create all dependencies, recursive make calls</p>
<p>dependencies: </p>
<p>all</p>
<p>build everything that is standard</p><ul>
<li>binaries and output data</li>
</ul>
<p>all: build-info binaries doit4</p>
<p>doitX</p>
<p>Step-by-step sequence as originally provided in upstream doitX.bat, now moved to old/doitX.bat</p>
<p>doit:  doit2:  doit3:  doit4: </p>
<p>arch</p>
<p>Create an archive of the data from current build</p>
<p>archive:  ( cd  ;\ tar -czvf nadcon5-..tgz out. ;\ )</p>
<p>gmtbatXX</p>
<p>Convenience targets to generate all the intermediate scripts step by step allows debugging,</p>
<p>However, script is currently executed always when built, note that this behavior may change</p>
<p>workfile: </p>
<p>gmtbat01: </p>
<p>gmtbat02: </p>
<p>gmtbat03: </p>
<p>gmtbat04: </p>
<p>gmtbat05: </p>
<p>gmtbat06: </p>
<p>.PHONY: src all doit doit2 doit3 doit4 gmtbat01 gmtbat02 gmtbat03 gmtbat04 gmtbat05 gmtbat06 arch workfile</p>
<h6></h6>
<h2>Python Targets</h2>
<h2></h2>
<h2>Targets related to building, testing, or developing the python extensions</h2>
<h2></h2>
<h2></h2>
<h2></h2>
<h6></h6>
<p>pybuild</p>
<p>Pre-Compile the python wrapper objects</p>
<p>pybuild: ./setup.py build</p>
<p>pydevelop</p>
<p>deploy nc5ng in setup.py develop mode (link and not copy0</p>
<p>pydevelop: pybuild ./setup.py develop</p>
<p>pyundevelop</p>
<p>undeploy nc5ng</p>
<p>pyundevelop: ./setup.py develop -u</p>
<p>pyinstall</p>
<p>Python install to site-packages</p>
<p>pyinstall: ./setup.py install</p>
<p>.PHONY: pybuild pydevelop pyinstall</p>
<h6></h6>
<h2>Clean Up Targets</h2>
<h2></h2>
<h2>Targets related deleting created files and resetting the state of the</h2>
<h2>repository</h2>
<h2></h2>
<h6></h6>
<p>clean</p>
<p>cleanup output directory for this build only!</p>
<p>clean:  -rf </p>
<p>mrclean</p>
<p>cleanup everything</p>
<p>mrclean:  -rf  distclean: mrclean</p>
<p>pyclean</p>
<p>cleanup python stuff that setup.py can't</p>
<p>pyclean:  -rf nc5ng/__pycache__  -rf nc5ng/core/__pycache__  -rf nc5ng/core/*.f  -rf nc5ng/core/*.c  -rf nc5ng/core/*.so  -rf dist/  -rf build/src.*  -rf build/lib.*  -rf build/temp.*  -rf ./*.egg-info ./setup.py develop -u ./setup.py clean</p>
<p>.PHONY: clean mrclean pyclean distclean</p>
<h6></h6>
<h2>Documentation Targets</h2>
<h2></h2>
<h2>Targets related to building and publishing documentation</h2>
<h2></h2>
<h2></h2>
<h2></h2>
<h6></h6>
<p>docs:  -C docs publish_docs</p>
<p>.PHONY: docs</p>
<h6></h6>
<h2>Informational targets</h2>
<h2></h2>
<h2>Targets which print various debug or other information about the build</h2>
<h2>it is possible that some targets create informational files</h2>
<h2></h2>
<h2></h2>
<h2></h2>
<h6></h6>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Dec 1 2017 01:50:50 for NADCON5-ng by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
