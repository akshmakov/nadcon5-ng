<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>NADCON5-ng: NADCON5 Build Programs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_style_overrides.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NADCON5-ng
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
   <div id="projectbrief">NADCON5 Next Generation Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>About</span></a></li>
      <li><a href="pages.html"><span>Manual</span></a></li>
      <li class="current"><a href="modules.html"><span>Code&#160;Documentation</span></a></li>
      <li><a href="https://nc5ng.org"><span>Project&#160;Homepage</span></a></li>
      <li><a href="https://github.com/nc5ng/nadcon5-ng"><span>Project&#160;Github</span></a></li>
      <li><a href="files.html"><span>Index</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__doers.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#dirs">Directories</a> &#124;
<a href="#func-members">Programs, Functions, and Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">NADCON5 Build Programs</div>  </div>
</div><!--header-->
<div class="contents">

<p>Programs which perform the generation of <code>GMT</code> batch scripts and the creation of output files using <a class="el" href="group__core.html">NADCON5 Core Library</a> and helpers.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="dirs"></a>
Directories</h2></td></tr>
<tr class="memitem:dir_68267d1309a1af8e8297ef4c3efbcdba"><td class="memItemLeft" align="right" valign="top">directory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></td></tr>
<tr class="memdesc:dir_68267d1309a1af8e8297ef4c3efbcdba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Folder containing the <a class="el" href="group__doers.html">NADCON5 Build Programs</a> and subfolders Code/Subs and Code/BinSource. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Programs, Functions, and Subroutines</h2></td></tr>
<tr class="memitem:gac9a2ad84815a01e9242386d75cfb3d08"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__doers.html#gac9a2ad84815a01e9242386d75cfb3d08">checkgrid</a></td></tr>
<tr class="memdesc:gac9a2ad84815a01e9242386d75cfb3d08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Part of the NADCON5 build process, generates <code>gmtbat04</code>  <a href="#gac9a2ad84815a01e9242386d75cfb3d08">More...</a><br /></td></tr>
<tr class="separator:gac9a2ad84815a01e9242386d75cfb3d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6a79a4e301f7aef2eee8c8faf772330"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__doers.html#gaf6a79a4e301f7aef2eee8c8faf772330">makeplotfiles01</a></td></tr>
<tr class="memdesc:gaf6a79a4e301f7aef2eee8c8faf772330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Part of the NADCON5 process, generates gmtbat01.  <a href="#gaf6a79a4e301f7aef2eee8c8faf772330">More...</a><br /></td></tr>
<tr class="separator:gaf6a79a4e301f7aef2eee8c8faf772330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0e3b2b69516341289fa5d05bec700bd"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__doers.html#gad0e3b2b69516341289fa5d05bec700bd">makeplotfiles02</a></td></tr>
<tr class="memdesc:gad0e3b2b69516341289fa5d05bec700bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Part of the NADCON5 process, generates <code>gmtbat03</code>  <a href="#gad0e3b2b69516341289fa5d05bec700bd">More...</a><br /></td></tr>
<tr class="separator:gad0e3b2b69516341289fa5d05bec700bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ba1fe4d681ced83528f69e465a2676f"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__doers.html#ga5ba1fe4d681ced83528f69e465a2676f">makeplotfiles03</a></td></tr>
<tr class="memdesc:ga5ba1fe4d681ced83528f69e465a2676f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Part of the NADCON5 process, generates <code>gmtbat06</code>  <a href="#ga5ba1fe4d681ced83528f69e465a2676f">More...</a><br /></td></tr>
<tr class="separator:ga5ba1fe4d681ced83528f69e465a2676f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf03b9b1cd4fc369d51ac1e46b9231fc7"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__doers.html#gaf03b9b1cd4fc369d51ac1e46b9231fc7">makework</a></td></tr>
<tr class="memdesc:gaf03b9b1cd4fc369d51ac1e46b9231fc7"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>Program</b> to create a <em>work</em> file which will serve as the primary information needed to analyze and create NADCON v5.0 grids.  <a href="#gaf03b9b1cd4fc369d51ac1e46b9231fc7">More...</a><br /></td></tr>
<tr class="separator:gaf03b9b1cd4fc369d51ac1e46b9231fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79d0be427fdfab9ef1456eaf0afab3da"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__doers.html#ga79d0be427fdfab9ef1456eaf0afab3da">mymedian5</a></td></tr>
<tr class="memdesc:ga79d0be427fdfab9ef1456eaf0afab3da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Program to filter Map Data for GMT Plotting.  <a href="#ga79d0be427fdfab9ef1456eaf0afab3da">More...</a><br /></td></tr>
<tr class="separator:ga79d0be427fdfab9ef1456eaf0afab3da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5baa6ad756ca0a7d136baa7644c5696b"><td class="memItemLeft" align="right" valign="top">program&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__doers.html#ga5baa6ad756ca0a7d136baa7644c5696b">myrms</a></td></tr>
<tr class="memdesc:ga5baa6ad756ca0a7d136baa7644c5696b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Part of the NADCON5 build process, generates <code>gmtbat05</code>  <a href="#ga5baa6ad756ca0a7d136baa7644c5696b">More...</a><br /></td></tr>
<tr class="separator:ga5baa6ad756ca0a7d136baa7644c5696b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Programs which perform the generation of <code>GMT</code> batch scripts and the creation of output files using <a class="el" href="group__core.html">NADCON5 Core Library</a> and helpers. </p>
<p>The elements described here are the "doers", programs that construct the output using elements of <a class="el" href="group__core.html">NADCON5 Core Library</a> </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac9a2ad84815a01e9242386d75cfb3d08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program checkgrid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Part of the NADCON5 build process, generates <code>gmtbat04</code> </p>
<p>Creates a batch file called </p><pre class="fragment">  gmtbat04.(olddtm).(newdtm).(region).(igridsec)
</pre><p>This Program:</p>
<p>1) Compare grids of dlat, dlon and deht to vectors of dlat, dlon and deht. 2) Spit out interpolated (from grid) vectors 3) Spit out differential (interpolated minus original) vectors. 4) Create a GMT batch file to plot said vectors.</p>
<p>The input vectors: </p><pre class="fragment">Represent *all* (outlier removed)
vectors of dlat/dlon/deht for the
olddatum/newdatum/region combination
</pre><p>However, for the sake of understanding, the vectors will be read in from their "thinned" and "dropped" files, so that we can generate statistics of:</p>
<p>thinned-versus-gridded dropped-versus-gridded all-versus-gridded</p>
<p>This is important, since ONLY the thinned vectors went into the grid and it seems that their statistics should be better against the grid than the dropped vectors. Additionally, one might argue that the only independent check on the grid is the dropped agreement. We'll see.</p>
<p>The input grids: </p><pre class="fragment">dlat/dlon/deht grids based on thinning
all of the vectors (see above) using
a median thinning at some block spacing
in arcseconds, and gridding to that same
block spacing.
</pre><h3>Program arguments</h3>
<p>Arguments are newline terminated and read from standard input</p>
<p>They are enumerated here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldtm</td><td>Source Datum </td></tr>
    <tr><td class="paramname">newdtm</td><td>Target Datum,region </td></tr>
    <tr><td class="paramname">region</td><td>Conversion Region </td></tr>
    <tr><td class="paramname">agridsec</td><td>Grid Spacing in arcsec</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><pre class="fragment">olddatum = 'ussd'
newdatum = 'nad27'
region = 'conus'
agridsec = '900'    
</pre><h3>Program Inputs:</h3>
<h2>Changelog</h2>
<h3>2016 08 26:</h3>
<p>Changed "getmapbounds" to bring in a better way of computing the reference vector location and added a new variable for its label</p>
<p>Also changing the call to "getmapbounds" to give it "olddatum" and "newdatum" to aide in filtering out things like the Saint regions in Alaska for unsupported transformations.</p>
<h3>2016 07 29:</h3>
<p>Scrapped personal placement of vectors and just let them sit outside/below the map</p>
<h3>2016 07 21:</h3>
<p>Added code to allow for optional placement of reference vectors, coming from "map.parameters" as read in subroutine "getmapbounds"</p>
<h3>2015 10 08:</h3>
<p>Added HOR output in M and S for Lat/Lon to both "gi" and "dd" vector output.</p>
<p>Combined: v(m/s)(a/t/d)(gi/dd)lat... v(m/s)(a/t/d)(gi/dd)lon... into : v(m/s)(a/t/d)(gi/dd)hor...</p>
<h3>2015 9 10:</h3>
<p>Initial Release For use in creating NADCON5 Built by Dru Smith </p>

<p>Definition at line <a class="el" href="checkgrid_8f_source.html#l00100">100</a> of file <a class="el" href="checkgrid_8f_source.html">checkgrid.f</a>.</p>

<p>References <a class="el" href="bicubic_8f_source.html#l00041">bicubic()</a>, <a class="el" href="bilin_8f_source.html#l00027">bilin()</a>, <a class="el" href="biquad_8f_source.html#l00033">biquad()</a>, <a class="el" href="bwplotvc_8f_source.html#l00037">bwplotvc()</a>, <a class="el" href="getgridbounds_8f_source.html#l00030">getgridbounds()</a>, <a class="el" href="getmapbounds_8f_source.html#l00077">getmapbounds()</a>, <a class="el" href="checkgrid_8f_source.html#l01784">nlines()</a>, and <a class="el" href="onzd2_8f_source.html#l00036">onzd2()</a>.</p>

<p><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__doers_gac9a2ad84815a01e9242386d75cfb3d08_cgraph.svg" width="367" height="392"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf6a79a4e301f7aef2eee8c8faf772330"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program makeplotfiles01 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Part of the NADCON5 process, generates gmtbat01. </p>
<p>Program to take a "work" file and create a variety of GMT-ready data files of the following</p><ol type="1">
<li>Coverage in latitude</li>
<li>Coverage in longitude</li>
<li>Coverage in ellipsoid height</li>
<li>Vectors in latitude</li>
<li>Vectors in longitude</li>
<li>Vectors in ellipdoid height</li>
<li>Vectors in horizontal (properly azimuthed)</li>
</ol>
<p>It furthermore will create batch file to run the GMT scripts: </p><pre class="fragment"> gmtbat01.(olddtm).(newdtm).(region).(mapflag)
</pre><h3>Program arguments</h3>
<p>Arguments are newline terminated and read from standard input</p>
<p>They are enumerated here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldtm</td><td>Source Datum </td></tr>
    <tr><td class="paramname">newdtm</td><td>Target Datum,region </td></tr>
    <tr><td class="paramname">region</td><td>Conversion Region </td></tr>
    <tr><td class="paramname">mapflag</td><td>Map Detail Level</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><pre class="fragment">olddatum = 'ussd'
newdatum = 'nad27'
region = 'conus'
mapflag = 0      
</pre><h3>Program Inputs:</h3>
<h2>Changelog</h2>
<h3>2016 08 26</h3>
<p>Added new code to do reference vectors consistently See DRU-12, p. 56-57 Also changing the call to "getmapbounds" to give it "olddatum" and "newdatum" to aide in filtering out things like the Saint regions in Alaska for unsupported transformations.</p>
<h3>2016 07 29:</h3>
<p>Scrapped the code for personalized reference vector location. Just put all ref vectors outside/below plot.</p>
<h3>2016 07 21:</h3>
<p>Added code to allow for optional placement of reference vectors, coming from "map.parameters" as read in subroutine "getmapbounds" </p>

<p>Definition at line <a class="el" href="makeplotfiles01_8f_source.html#l00058">58</a> of file <a class="el" href="makeplotfiles01_8f_source.html">makeplotfiles01.f</a>.</p>

<p>References <a class="el" href="bwplotcv_8f_source.html#l00030">bwplotcv()</a>, <a class="el" href="bwplotvc_8f_source.html#l00037">bwplotvc()</a>, <a class="el" href="getmapbounds_8f_source.html#l00077">getmapbounds()</a>, and <a class="el" href="onzd2_8f_source.html#l00036">onzd2()</a>.</p>

<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__doers_gaf6a79a4e301f7aef2eee8c8faf772330_cgraph.svg" width="402" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad0e3b2b69516341289fa5d05bec700bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program makeplotfiles02 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Part of the NADCON5 process, generates <code>gmtbat03</code> </p>
<p>Built upon the skeleton of "makeplotem.f" for GEOCON v2.0 But built specifically for NADCON v5.0. So different in file names and expanded plot creation that it was given the new name "makeplotfiles02.f" to align with another NADCON5 program "makeplotfiles01.f"</p>
<p>Creates a batch file called </p><pre class="fragment">  gmtbat03.(olddtm).(newdtm).(region).(igridsec)
</pre><p>That batch file will create JPGs of:</p><ol type="1">
<li>Color Plots of the dlat/dlon/deht grids at T=0.4</li>
<li>Color Plots of the "method noise" grids (the "d3" grids, see DRU-11, p. 150) with thinned coverage overlaid</li>
<li>B/W plots of thinned vectors that went into the T=0.4 transformation grid</li>
<li>B/W plots of dropped vectors that did not go into the T=0.4 transformation grid</li>
<li>B/W plots of thinned coverage of points that went into the T=0.4 transformation grid</li>
<li>B/W plots of dropped coverage of points that did not go into the T=0.4 transformation grid</li>
</ol>
<h3>Program arguments</h3>
<p>Arguments are newline terminated and read from standard input</p>
<p>They are enumerated here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldtm</td><td>Source Datum </td></tr>
    <tr><td class="paramname">newdtm</td><td>Target Datum,region </td></tr>
    <tr><td class="paramname">region</td><td>Conversion Region </td></tr>
    <tr><td class="paramname">agridsec</td><td>Grid Spacing in arcsec</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><pre class="fragment">olddatum = 'ussd'
newdatum = 'nad27'
region = 'conus'
agridsec = '900'    
</pre><h3>Program Inputs:</h3>
<h2>Changelog</h2>
<h3>2016 08 26</h3>
<p>Added new code to do reference vectors consistently See DRU-12, p. 56-57 Also fixed a typo in reference vector length for vmtcdeht plots Also changing the call to getmapbounds to give it <code>olddatum</code> and <code>newdatum</code> to aide in filtering out things like the Saint regions in Alaska for unsupported transformations.</p>
<h3>2016 07 29:</h3>
<p>Scrapped code about personalized reference vectors. Just put all reference vectors outside/below plot Also moved gridstats and vecstats out into the <code>/Subs</code> directory to be used by other programs (like <a class="el" href="makeplotfiles03_8f.html">makeplotfiles03.f</a>)</p>
<h3>2016 07 28:</h3>
<p>Changed code to build the color palette of the <code>d3</code> grids around the median, and not ave or std. See DRU-12, p. 48</p>
<h3>2016 07 21:</h3>
<p>Added code to allow for optional placement of reference vectors, coming from <code>map.parameters</code> as read in subroutine getmapbounds</p>
<h3>2016 01 21:</h3>
<p>Updated to get the CPT values fixed in <code>d3</code> grids, so that (cpthi - cptlo) is exactly divisible by <code>cptin</code> at (2 x csm)</p>
<h3>2015 10 27:</h3>
<p>Updated to work with the new naming scheme (see DRU-11, p. 150)</p>
<h3>2015 10 05:</h3>
<p>Updated to work with the new naming scheme (see DRU-11, p. 139) </p>

<p>Definition at line <a class="el" href="makeplotfiles02_8f_source.html#l00078">78</a> of file <a class="el" href="makeplotfiles02_8f_source.html">makeplotfiles02.f</a>.</p>

<p>References <a class="el" href="bwplotcv_8f_source.html#l00030">bwplotcv()</a>, <a class="el" href="bwplotvc_8f_source.html#l00037">bwplotvc()</a>, <a class="el" href="coplot_8f_source.html#l00074">coplot()</a>, <a class="el" href="coplotwcv_8f_source.html#l00072">coplotwcv()</a>, <a class="el" href="cpt_8f_source.html#l00032">cpt()</a>, <a class="el" href="cpt2_8f_source.html#l00025">cpt2()</a>, <a class="el" href="getmapbounds_8f_source.html#l00077">getmapbounds()</a>, <a class="el" href="gridstats_8f_source.html#l00014">gridstats()</a>, <a class="el" href="onzd2_8f_source.html#l00036">onzd2()</a>, and <a class="el" href="vecstats_8f_source.html#l00012">vecstats()</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__doers_gad0e3b2b69516341289fa5d05bec700bd_cgraph.svg" width="402" height="494"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5ba1fe4d681ced83528f69e465a2676f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program makeplotfiles03 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Part of the NADCON5 process, generates <code>gmtbat06</code> </p>
<p>Creates a batch file called </p><pre class="fragment">  gmtbat06.(olddtm).(newdtm).(region).(igridsec).(mapflag)
</pre><p>That batch file will create JPGs of:</p><ol type="1">
<li>Color Plots of the rddlat/rddlon/rddeht grids</li>
<li>B/W plots of coverage of RMS'd differential vectors that went into the grid</li>
<li>B/W plots of RMS'd differential vectors that went into the grid</li>
</ol>
<h3>Program arguments</h3>
<p>Arguments are newline terminated and read from standard input</p>
<p>They are enumerated here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldtm</td><td>Source Datum </td></tr>
    <tr><td class="paramname">newdtm</td><td>Target Datum,region </td></tr>
    <tr><td class="paramname">region</td><td>Conversion Region </td></tr>
    <tr><td class="paramname">agridsec</td><td>Grid Spacing in arcsec </td></tr>
    <tr><td class="paramname">mapflag</td><td>Map Generation Level</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><pre class="fragment">olddatum = 'ussd'
newdatum = 'nad27'
region = 'conus'
agridsec = '900'    
mapflag = '0'   
</pre><h3>Program Inputs:</h3>
<h2>Changelog</h2>
<h3>2016 10 19:</h3>
<p>FIX for the HARN/FBN transformation. As it stood, the "gridstats" was returning "0.0" as the median of the post-masked "ete" grid (which is true, but unfortunate.) I've changed the call to "gridstats" to send it the "PREMASKED" version of the "ete" grid, so the median won't be zero.</p>
<h3>2016 08 26</h3>
<p>Added new code to do reference vectors consistently See DRU-12, p. 56-57</p>
<p>Fixed an error where "lorvogehtm" was declared real*8 but past 72 column, so defaulting to integer*4 and coming out as "0.000" on plots</p>
<p>Also changing the call to "getmapbounds" to give it "olddatum" and "newdatum" to aide in filtering out things like the Saint regions in Alaska for unsupported transformations.</p>
<h3>2016 08 02:</h3>
<p>Changed the color palette for "09" grids from 2xMedian to 3xMedian</p>
<h3>2016 07 29:</h3>
<p>Dropped code about personalized reference vectors and just let them be below/outside map</p>
<h3>2016 08 01:</h3>
<p>Moved "gridstats" to subroutines Also, completely removed the in-program computations of the color palette, and instead relied on "cpt" and "cpt2" as per "makeplotfiles02"</p>
<h3>2016 07 21:</h3>
<p>Added code to allow for optional placement of reference vectors, coming from <code>map.parameters</code> as read in subroutine getmapbounds</p>
<h3>2016 01 21:</h3>
<p>Updated to fix the CPT for the "09" (data noise) grids so that (cpthi - cptin) is exactly divisible by cptin</p>
<h3>2015 11 09:</h3>
<p>Updated to adopt new naming scheme (yes, again) (See DRU-11, p. 150), as well as creating plots of the total error grid.</p>
<h3>2015 10 07:</h3>
<p>Latest Version which had new naming scheme and dual-computations of arcseconds and meters for lat/lon See DRU-11, pl. 139. </p>

<p>Definition at line <a class="el" href="makeplotfiles03_8f_source.html#l00088">88</a> of file <a class="el" href="makeplotfiles03_8f_source.html">makeplotfiles03.f</a>.</p>

<p>References <a class="el" href="bwplotcv_8f_source.html#l00030">bwplotcv()</a>, <a class="el" href="bwplotvc_8f_source.html#l00037">bwplotvc()</a>, <a class="el" href="coplot_8f_source.html#l00074">coplot()</a>, <a class="el" href="cpt2_8f_source.html#l00025">cpt2()</a>, <a class="el" href="getmapbounds_8f_source.html#l00077">getmapbounds()</a>, <a class="el" href="gridstats_8f_source.html#l00014">gridstats()</a>, and <a class="el" href="onzd2_8f_source.html#l00036">onzd2()</a>.</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__doers_ga5ba1fe4d681ced83528f69e465a2676f_cgraph.svg" width="402" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf03b9b1cd4fc369d51ac1e46b9231fc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program makework </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>Program</b> to create a <em>work</em> file which will serve as the primary information needed to analyze and create NADCON v5.0 grids. </p>
<p>This program is based on previous programs that were created by Dru Smith during the GEOCON v2.0 process. It has been modified specifically to be a tool for NADCON v5.0.</p>
<p>Rather than have multiple programs (1, 2, 3, 4 as was the case for GEOCON v2.0), It was decided make ONE working "makework.f" program (this one) and have it feed off of an input file which can be modified.</p>
<p>The input file will reflect all that is necessary to create a work file.</p>
<h3>Program arguments</h3>
<p>Arguments are newline terminated and read from standard input</p>
<p>They are enumerated here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldtm</td><td>Source Datum </td></tr>
    <tr><td class="paramname">newdtm</td><td>Target Datum,region </td></tr>
    <tr><td class="paramname">region</td><td>Conversion Region</td></tr>
  </table>
  </dd>
</dl>
<h3>Program Inputs:</h3>
<ul>
<li><p class="startli">A <em>control file</em> in directory <code>Control/</code>, the name is generated from input arguments</p>
<p class="startli">Known control file names are: </p><pre class="fragment">cfname = control.ussd.nad27.conus
cfname = control.nad27.nad83_1986.conus
</pre></li>
<li>A <em>manual edits</em> file, called <code>workedits</code> in directory <code>Work/</code></li>
</ul>
<h2>By way of example...</h2>
<p><b>If</b> the input file controlling the creation of the work file is: </p><pre class="fragment">Control/control.ussd.nad27.conus
</pre><p>then the output data file is: </p><pre class="fragment">Work/work.ussd.nad27.conus
</pre><p>The work file has the following format: </p><pre class="fragment">Cols  Format Description
  1-  6   a6    PID
      7   1x    - blank -
  8-  9   a2    State
     10   a1    Reject code for missing latitude pair (blank for good)
     11   a1    Reject code for missing longitude pair (blank for good)
     12   a1    Reject code for missing ellip ht pair (blank for good)
     13   1x    - blank -
 14- 27 f14.10  Latitude (Old Datum), decimal degrees (-90 to +90)
     28   1x    - blank -
 29- 42 f14.10  Lonitude (Old Datum), decimal degrees (0 to 360)
     43   1x    - blank -
 44- 51   f8.3  Ellipsoid Height (Old datum), meters
     52   1x    - blank -
 53- 61   f9.5  Delta Lat (New Datum minus Old Datum), arcseconds
     62   1x    - blank -
 63- 71   f9.5  Delta Lon (New Datum minus Old Datum), arcseconds
     72   1x    - blank -
 73- 81   f9.3  Delta Ell Ht (New Datum minus Old Datum), meters
     82   1x    - blank - 
 83- 91   f9.3  Delta Horizontal (absolute value), arcseconds
     92   1x    - blank -
 93-101   f9.5  Azimuth of Delta Horizontal (0-360), degrees
    102   1x    - blank - 
103-111   f9.3  Delta Lat (New Datum minus Old Datum), meters
    112   1x    - blank -
113-121   f9.3  Delta Lon (New Datum minus Old Datum), meters
    122   1x    - blank -
123-131   f9.3  Delta Horizontal (absolute value), meters
    132   1x    - blank -
133-142   a10   Old Datum Name
    143   1x    - blank - 
144-153   a10   New Datum Name
    format(a6,1x,a2,a1,a1,a1,1x,f14.10,1x,f14.10,1x,f8.3,1x,
   *f9.5,1x,f9.5,1x,f9.3,1x,f9.3,1x,f9.5,1x,f9.3,1x,f9.3,1x,f9.3,
    1x,a10,1x,a10)
</pre><p>This differs from Dennis's GEOCON v1.0 in that:</p><ul>
<li>3 reject codes</li>
<li>10 decimal places in latitude (See DRU-10, p. 123)</li>
<li>10 decimal places in longitude (See DRU-10, p. 123)</li>
<li>Lat, Lon and Horizontal in both arcseconds and meters each</li>
<li>Azimuth of Horizontal</li>
<li>Identification of which datums are transformed</li>
</ul>
<h2>References</h2>
<h3>NADCON5:</h3>
<p>See:</p><ul>
<li>DRU-11, p. 124</li>
</ul>
<h3>GEOCON v2.0:</h3>
<p>See:</p><ul>
<li>DRU-10, p. 143</li>
<li>DRU-11, p. 10</li>
<li>DRU-11, p. 26</li>
<li>DRU-11, p. 56</li>
</ul>
<h2>Changelog</h2>
<h3>2017 11 19 (<b>NG</b>)</h3>
<p>Formated Comments to be compatible with Doxygen Due to deprecation of various arguments for GMT tools, invocation of <code>xyz2grd</code> and <code>grd2xyz</code> have arguments options changed in generated files</p><ul>
<li><code>-bos</code> -&gt; <code>-bo3f</code> with equivalent meaning of a 3 column single precision output</li>
<li><code>-bis</code> -&gt; <code>-bi3f</code> with equivalent meaning of a 3 column single precision input</li>
</ul>
<h3>2016 09 14:</h3>
<p>Due to some complications in <a class="el" href="mymedian5_8f.html">mymedian5.f</a> which happen if data is in the <em>work</em> file that is not to be sorted and used, I've decided to put the <em>out of grid</em> point removal code here, so that such points will go into the <em>work</em> file but will all get a <code>111</code> set of reject codes so they don't go forward in the processing.</p>
<h3>2016 09 13:</h3>
<p>Fixed a bug that sends an incoming <code>0</code> reject flag as a <b>zero</b>. All later programs expect a BLANK for a "good" reject code. The incoming <code>0</code> is from the <code>workedits</code> file and is fine to come in, but must go OUT as a BLANK.</p>
<p>Also, put in code to correct situations where an entry is in <code>workedits</code>, but the PID for that entry isn't actually in the incoming data. This relies on a new vector <code>EditTracker</code></p>
<h3>2016 02 26:</h3>
<p>Change (see: DRU-12, p. 18) to reflect the decision that "manual edits" should ONLY edit data OUT and <b>not</b> add data back in.</p>
<h3>2016 01 07:</h3>
<p>Changed to split "Relevant Edits" into three counts: lat, lon and eht </p>

<p>Definition at line <a class="el" href="makework_8f_source.html#l00150">150</a> of file <a class="el" href="makework_8f_source.html">makework.f</a>.</p>

<p>References <a class="el" href="getgridbounds_8f_source.html#l00030">getgridbounds()</a>.</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__doers_gaf03b9b1cd4fc369d51ac1e46b9231fc7_cgraph.svg" width="244" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga79d0be427fdfab9ef1456eaf0afab3da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program mymedian5 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Program to filter Map Data for GMT Plotting. </p>
<ol type="1">
<li>Run a customized block-median thinning algorithm on coordinate differences (horizontal and ellipsoid height)</li>
<li>Save the thinned data to GMT-ready plottable files</li>
<li>Save the removed data to GMT-ready plottable files</li>
<li>Create a GMT batch file (gmtbat02) to grid the thinned data at T=0.4 (which becomes the final transformation grid) and also at T=1.0 and T=0.0, (whose difference becomes the bases for the "method noise" grid)</li>
<li>If, and only if, we are doing the combination of HARN/FBN/CONUS, insert commands into gmtbat02 to apply a mask to the "04.b" grids (See DRU-12, p. 36-37) See DRU-11, p. 127</li>
</ol>
<p>unlike <code>mymedian.f</code>, this program is set up to filter/process all data at once in one run. Also, significant philosophical changes occurred, including:</p>
<ol type="1">
<li>Median filter on absolute horizontal length, and then, when we have our "kept" points, we use the lat and lon of those kept points to grid lat and lon separately. (mymedian.f actually sorted lat medians and lon medians separately, raising the very real possibility that separate points would go into each grid.)</li>
<li>Nothing RANDOM! No coin flipping, etc. It was viewed, for NADCON 5.0, as scientifically improper for the final grids to be reliant upon a filtering mechanism that could be different each time it was run.</li>
</ol>
<h3>Program arguments</h3>
<p>Arguments are newline terminated and read from standard input</p>
<p>They are enumerated here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldtm</td><td>Source Datum </td></tr>
    <tr><td class="paramname">newdtm</td><td>Target Datum,region </td></tr>
    <tr><td class="paramname">region</td><td>Conversion Region </td></tr>
    <tr><td class="paramname">agridsec</td><td>Grid Spacing in Arc Seconds</td></tr>
  </table>
  </dd>
</dl>
<h3>Program Inputs:</h3>
<h2>Changelog</h2>
<h3>2016 09 14</h3>
<p>Bug found when running Hawaii with points outside grid &ndash; some mixup between "ikt" and "ipid". Changed this program as follows: It now REQUIRES that the incoming data has NO points outside the grid boundary. This has been forced by giving such points a "444" reject code in "makework" when creating the work file. By going through "makeplotfiles01" with a "444" reject, those points won't even make it into the "all" file, which is our input for median filtering here...</p>
<h3>2016 06 29</h3>
<p>Updated to insert masking commands for the "...04.b" (transformation grid) into gmtbat02 when working ONLY in the HARN/FBN/CONUS combination.</p>
<h3>2015 10 27</h3>
<p>For use in creating NADCON5 Built by Dru Smith Built from scratch, scrapping all previous "mymedian" programs used in making GEOCON </p>

<p>Definition at line <a class="el" href="mymedian5_8f_source.html#l00071">71</a> of file <a class="el" href="mymedian5_8f_source.html">mymedian5.f</a>.</p>

<p>References <a class="el" href="getgridbounds_8f_source.html#l00030">getgridbounds()</a>, <a class="el" href="mymedian5_8f_source.html#l01334">getmedian()</a>, and <a class="el" href="indexxi_8for_source.html#l00024">indexxi()</a>.</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__doers_ga79d0be427fdfab9ef1456eaf0afab3da_cgraph.svg" width="366" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5baa6ad756ca0a7d136baa7644c5696b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">program myrms </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Part of the NADCON5 build process, generates <code>gmtbat05</code> </p>
<p>Creates a batch file called </p><pre class="fragment">  gmtbat05.(olddtm).(newdtm).(region).(igridsec)
</pre><p>Program to</p><ol type="1">
<li>Run a customized RMS-computing algorithm on vector differences (gridded minus true)</li>
<li>Save the RMS data to GMT-ready plottable files</li>
<li>Create a GMT batch file to plot both the thinned data and removed data in both coverage and vectors</li>
</ol>
<p>Unlike "mymedian5.f", this program is set up to compute the RMS of vector differences in a cell-by-cell basis (aka NOT a median filter at all, but a true RMS representation of of disagreements)</p>
<p>A "value" is the differential vector of: </p><pre class="fragment">interpolated-from-grid minus true
</pre><p>For any cell with at least ONE point with a value, the following is done:</p><ol type="1">
<li>Compute the average latitude of all points in the cell</li>
<li>Compute the average longitude of all points in the cell</li>
<li>Compute the RMS of all values in the cell</li>
</ol>
<p>The output vector will then reflect these three values.</p>
<p>For latitude and ellipsoid height, the azimuth of the vector will ALWAYS be 0.0 (pointing up) while for longitude it will always be 90.0 (pointing right). However, these are mere conventions as they are not directional vectors anyway, but rather quanta which will be gridded and it is the grid which is of utmost importance.</p>
<p>No PIDS will be in the output files, as the output RMS vectors are not reflective of any one point, but rather a cell-wide conglomeration of information.</p>
<p>See DRU-11, p. 130</p>
<h3>Program arguments</h3>
<p>Arguments are newline terminated and read from standard input</p>
<p>They are enumerated here </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldtm</td><td>Source Datum </td></tr>
    <tr><td class="paramname">newdtm</td><td>Target Datum,region </td></tr>
    <tr><td class="paramname">region</td><td>Conversion Region </td></tr>
    <tr><td class="paramname">agridsec</td><td>Grid Spacing in arcsec</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><pre class="fragment">olddatum = 'ussd'
newdatum = 'nad27'
region = 'conus'
agridsec = '900'    
</pre><h3>Program Inputs:</h3>
<h2>Changelog</h2>
<h3>2016 01 21:</h3>
<p>Updated to RETURN to an old way of registering RMS vectors at AVE lat/lon rather than center of cell.</p>
<h3>2015 10 28</h3>
<p>Updated to work with new naming scheme (see DRU-11, p. 150) and to adopt the central lat/lon for the RMS vectors, rather than ave lat/ave lon (see DRU-11, p.145), and to also set up the gridding of RMS vectors at the T=0.9 level (see DRU-11, p. 148)</p>
<p>Also added "donzd" functionality to help control the magnitude of the Length of Reference Vector on Ground variables.</p>
<p>Also, added a section at the end to create the TOTAL error grids. by RMS-combining the "method noise grid" (the "d3" grid) with the "data noise grid" (the "rdd...09" grid) into one single "transformation error grid"</p>
<h3>2016 08 25:</h3>
<p>For reasons that are difficult to describe, "donzd" is now "onzd2.f" in /home/dru/Subs. Change and recompile...</p>
<h3>2015 10 09:</h3>
<p>Updated to add HOR vectors</p>
<h3>2015 10 06:</h3>
<p>Updated</p>
<h3>2015 09 16:</h3>
<p>Initial Release, For use in creating NADCON5 Built by Dru Smith </p>

<p>Definition at line <a class="el" href="myrms_8f_source.html#l00101">101</a> of file <a class="el" href="myrms_8f_source.html">myrms.f</a>.</p>

<p>References <a class="el" href="getgridbounds_8f_source.html#l00030">getgridbounds()</a>, <a class="el" href="myrms_8f_source.html#l01252">getrms()</a>, <a class="el" href="indexxi_8for_source.html#l00024">indexxi()</a>, and <a class="el" href="onzd2_8f_source.html#l00036">onzd2()</a>.</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__doers_ga5baa6ad756ca0a7d136baa7644c5696b_cgraph.svg" width="224" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Dec 1 2017 02:49:28 for NADCON5-ng by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
